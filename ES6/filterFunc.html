<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<!--
    filter()함수
        : filter 함수는 명칭과 같이 콜백함수의 조건에 해당하는
        요소만 반환하여 새로운 배열을 생성하는 역할을 한다.

        형식[
            var oldArr = [1,2,3, ....]    
            var newArr = oldArr.filter(
                callBackFunction(요소값, 요소인덱스, 사용하는배열객체){
                    필터링 할 조건;
                } , thisArgs
            );        
            형식 마지막의 thisArgs는 filter에서 사용할 this값으로 선택적으로
            사용한다. 만약 사용하지 않을경우 undefined이 전달된다.
-->

    <script>
    console.error("filterTest1() called..기본사용법");
        (function filterTest1(){
            var oldArray = [1,2,3,4,5];

            var newArray = oldArray.filter(function(element, index, array){
                //oldArray의 크기만큼 자동으로 반복하면서 각 요소를 출력한다.
                console.log("현재인자값"+element);
                console.log("인덱스"+index);
                console.log("배열"+array);
            });
        })();
        /*
        함수 정의 및 즉시 호출
        (function 함수명(){
            실행부;
        })();
        */

        console.error("filterTest2() called..조건에 맞는 엘리먼트만 추출");
        (function filterTest2(){
            var oldArray = [1,2,3,4,5];

            var newArray = oldArray.filter(function(elt, i, arr){
                //각 요소 중 3 이하인 값들만 추출되어 새로운 배열로 저장됨.
                return elt<=3;
            });
            console.log("배열:"+ newArray);
        })();

        console.error("filterTest3() called.. JSON 객체형배열 사용 및 검색");
        (function filterTest3(){
            var objJsonArray = [
                {name : "혜빈", salary : 100000},
                {name : "제인", salary : 200000},
                {name : "나윤", salary : 300000},
                {name : "주이", salary : 400000},
                {name : "아인", salary : 500000},
                {name : "낸시", salary : 600000}
            ];

            var newJson = objJsonArray.filter(function(elt, i, arr){
                console.log("현재요소의 이름="+ elt.name);
                //급여가 300,000이상인 JSON객체만 추출하여 복사
                return elt.salary>=300000; //급여가 30만 이상인 엘리먼트 추출

            }, undefined); 
            console.log("newJson", newJson);
        })();

        console.error("filterTest4() called.. thisArg 매개변수 사용하기");
        (function filterTest4(){
            var testArray = [1,2,3,4,5,50,100];
            //매개변수로 사용할 JSON객체
            var thisArg = {min:1, max:10};
            //콜백함수. 1이상 10이하인 요소만 추출한다.
            function getMinMax(value){
                return value>=this.min && value<=this.max;
            }

            var newArray = testArray.filter(getMinMax, thisArg);
            console.log('thisArgs사용결과', newArray);
        })();
    </script>
</body>
</html>